services:
  - type: web
    name: ai-platform-backend
    env: node
    region: frankfurt  # or oregon, virginia - choose based on your preference
    buildCommand: |
      npm install
      # Install Python and required dependencies
      apt-get update && apt-get install -y python3 python3-pip python3-dev
      pip3 install --break-system-packages --upgrade pip
      pip3 install --break-system-packages -r python_requirements.txt
      # Download NLTK data
      python3 -c "import nltk; nltk.download('punkt'); nltk.download('stopwords'); nltk.download('wordnet'); nltk.download('omw-1.4')"
      # Download spaCy model
      python3 -m spacy download en_core_web_sm
    startCommand: npm start
    envVars:
      - key: NODE_ENV
        value: production
      - key: MONGODB_URI
        sync: false  # Add your MongoDB URI in the Render dashboard
    autoDeploy: false